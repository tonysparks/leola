/*var iterations = 1000000;
while( iterations )
{
	var testHeap = def();
	iterations = iterations - 1;
	var i = iterations % 2;
	if ( i ) {
		println( i );
	}
	// println(" " + iterations + " " + testHeap);
}
println("Done");
*/
var linkedlist = def(v) {
	var next = null;	
	var value = v;
	
	return def(n, f) {		
		if ( next ) next(n);
		else next = n;
		
		if ( f ) {
			f(value)
		}
		
		return value;
	}
};

var l = linkedlist(1);
var l2 = linkedlist(2) 
var l3 = linkedlist(3);
var g = def(i) println(i) 

println ( "" + l( l2( l3() ), println ) );